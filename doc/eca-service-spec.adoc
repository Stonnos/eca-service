= Модуль ECA - SERVICE (v3.3)
:toc: macro

== 1. Описание модуля

1. Данный сервис предназначен для построения различных моделей классификаторов, а также расчёта их основных показателей точности. Сервис поддерживает построение как одиночных, так и ансамблевых моделей.

2. Сервис также предоставляет REST - API Data Miner, основным предназначением которого является автоматический подбор оптимальных параметров для одиночных и ансамблевых алгоритмов на основе серии экспериментов.

3. Интеграция с внешним сервисом evaluation-results-service. API предоставляет возможность отправки результатов классификации во внешних сервис для последующего анализа, а также нахождение оптимальных конфигураций классификаторов для конкретной обучающей выборки на основе истории результатов классификации.

4. Интеграция с внешним сервисом Notification service для отправки почты.

Для интеграции с eca - service, на клиенте должна быть установлена самая последняя версия eca-core (6.1), в которой реализованы такие классы как: AbstractClassifier, Instances, EvaluationResults.

== 2. Описание формата отправки запроса на обучение модели классификатора

=== 2.1. Описание полей запроса на обучение модели классификатора

[options="header"]
|===
|№|Название поля|Тип|Обязательное|Описание|Комментарий
|1
|classifier
|Base64 of AbstractClassifier
|+
|Base64 представление классификатора с заданными входными параметрами
|Допускается любой классификатор, производный от AbstractClassifier из библиотеки weka
|2
|data
|Base64 of Instances
|+
|Base64 представление обучающей выборки для построения классификатора
|Объект типа Instances из библиотеки weka
|3
|evaluationMethod
|string
|+
|Метод оценки точности классификатора
|Заполняется по по справочнику <<Справочник значений EvaluationMethod>>
|4
|evaluationOptionsMap
|Map
|-
|Набор параметров в виде ключ/значение для метода оценки точности классификатора
|
|===

=== 2.2. Описание полей ответа на запрос для обучения модели классификатора

[options="header"]
|===
|№|Название поля|Тип|Обязательное|Описание|Комментарий
|1
|requestId
|string
|+
|Идентификатор запроса
|
|2
|status
|string
|+
|Статус ответа
|Заполнятся по <<Справочник значений TechnicalStatus>>
|2
|errorMessage
|string
|-
|Текст ошибки
|Заполняется в случае, если произошла какая либо ошибка
|3
|evaluationResults
|Base64 of EvaluationResults
|-
|Результаты классификации, включая построенную модель классификатора
|Заполняется только в случае, если значение статуса ответа SUCCESS
|===

== 3. Описание формата заявки на эксперимент

=== 3.1. Описание полей заявки на построение экперимента

[options="header"]
|===
|№|Название поля|Тип|Обязательное|Описание|Комментарий
|1
|firstName
|string
|+
|Имя
|Используется для приветствия в ответном письме с результатми эксперимента
|2
|email
|string
|+
|Email, на который будет отправлено письмо с результатми эксперимента
|Здесь задается email, на который будет отправлено письмо с результатми эксперимента
|3
|experimentType
|string
|+
|Тип эксперимента
|Заполняется по по справочнику <<Справочник значений ExperimentType>>
|4
|data
|Base64 of Instances
|+
|Base64 представление обучающей выборки для построения классификатора
|Объект типа Instances из библиотеки weka
|5
|evaluationMethod
|string
|+
|Метод оценки точности классификатора
|Заполняется по по справочнику <<Справочник значений EvaluationMethod>>
|===

=== 3.2. Описание полей ответа на заявку для построение эксперимента

[options="header"]
|===
|№|Название поля|Тип|Обязательное|Описание|Комментарий
|1
|requestId
|string
|+
|Идентификатор запроса
|
|2
|status
|string
|+
|Статус ответа
|Заполнятся по <<Справочник значений TechnicalStatus>>
|2
|errorMessage
|string
|-
|Текст ошибки
|Заполняется в случае, если произошла какая либо ошибка
|===

== 4. Описание формата отправки запроса на нахождение оптимального классификатора

=== 4.1. Описание полей запроса на нахождение оптимального классификатора

[options="header"]
|===
|№|Название поля|Тип|Обязательное|Описание|Комментарий
|1
|data
|Base64 of Instances
|+
|Base64 представление обучающей выборки для построения классификатора
|Объект типа Instances из библиотеки weka
|===

=== 4.2. Описание полей ответа на запрос для нахождение оптимального классификатора

[options="header"]
|===
|№|Название поля|Тип|Обязательное|Описание|Комментарий
|1
|requestId
|string
|+
|Идентификатор запроса
|
|2
|status
|string
|+
|Статус ответа
|Заполнятся по <<Справочник значений TechnicalStatus>>
|2
|errorMessage
|string
|-
|Текст ошибки
|Заполняется в случае, если произошла какая либо ошибка
|3
|evaluationResults
|Base64 of EvaluationResults
|-
|Результаты классификации, включая построенную модель классификатора
|Заполняется только в случае, если значение статуса ответа SUCCESS
|===


== Справочник значений EvaluationMethod

[options="header"]
|===
|№|Значение|Описание
|1
|TRAINING_DATA
|Использование всей обучающей выборки для оценки точности классификатора
|2
|CROSS_VALIDATION
|Метод k * V - блочной кросс проверки на тестовой выборке
|===

== Справочник значений TechnicalStatus

[options="header"]
|===
|№|Код ответа|Описание
|1
|SUCCESS
|Статус усешного ответа
|2
|ERROR
|Произошла какая либо ошибка
|3
|TIMEOUT
|Произошел таймаут
|===

== Справочник значений ExperimentType

[options="header"]
|===
|№|Код ответа|Описание
|1
|NEURAL_NETWORKS
|Автоматический подбор оптимальных параметров для нейронных сетей
|2
|HETEROGENEOUS_ENSEMBLE
|Автоматический подбор оптимальных параметров для неоднородного ансамблевого алгоритма
|3
|MODIFIED_HETEROGENEOUS_ENSEMBLE
|Автоматический подбор оптимальных параметров для модифицированного неоднородного ансамблевого алгоритма
|4
|ADA_BOOST
|Автоматический подбор оптимальных параметров для алгоритма AdaBoost
|5
|STACKING
|Автоматический подбор оптимальных параметров для алгоритма Stacking
|6
|KNN
|Автоматический подбор оптимальных параметров для алгоритма KNN
|7
|RANDOM_FORESTS
|Автоматический подбор оптимальных параметров для алгоритма RandomForests
|5
|STACKING_CV
|Автоматический подбор оптимальных параметров для алгоритма Stacking CV
|===

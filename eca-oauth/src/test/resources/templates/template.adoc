= ${openApi.title}
Автор: ${openApi.author} <${openApi.email}>
:toc:
:toc-title: Table of contents

== Overview

${openApi.description}

<#if openApi.securitySchemes?has_content>
== Security schemas

<#list openApi.securitySchemes as securityScheme>

=== ${securityScheme.name} - ${securityScheme.description}

[width=100%]
|===
|Type|Description|Schema
|*${securityScheme.type}*
|
<#if securityScheme.in??>
*Token value in:* __${securityScheme.in}__
</#if>

<#if securityScheme.bearerFormat??>
*Bearer format:* __${securityScheme.bearerFormat}__
</#if>
a|<#if securityScheme.oauth2Flows?has_content>
<#list securityScheme.oauth2Flows as flow>

*Grant type:* ${flow.grantType}

<#if flow.tokenUrl??>
*Token url:* ${flow.tokenUrl}
</#if>

<#if flow.tokenUrl??>
*Refresh token url:* ${flow.refreshUrl}
</#if>

<#if flow.authorizationUrl??>
*Authorization url:* ${flow.authorizationUrl}
</#if>

<#if flow.scopes?has_content>
*Scopes*:

<#list flow.scopes as scope>

* ${scope}
</#list>
</#if>

</#list>
</#if>
|===
</#list>
</#if>

<#list openApi.methods as method>
== ${method.description}

__${method.requestType}__ *${method.endpoint}* - ${method.summary}

<#if method.security?has_content>
*Security requirement*

[cols="^50%,^50%",options="header"]
|===
|Name|Scopes
<#list method.security as security>
|*${security.name}*
a|<#list security.scopes as scope>

* ${scope}
</#list>
</#list>
|===
</#if>

<#if method.requestBody??>
[width=100%]
|===
|Content type|Required|Schema|Example
|*${method.requestBody.contentType}*
|${method.requestBody.required}
|<#if method.requestBody.bodyRef??><<${method.requestBody.bodyRef}>><#else>-</#if>
a|
<#if method.requestBody.example??>
[source,json]
----
${method.requestBody.example}
----
<#else>
-
</#if>
|===
</#if>
<#if method.requestParameters?has_content>

*Request parameters*
[width=100%]
|===
|Name|Description|Type|Schema
<#list method.requestParameters as parameter>
|*${parameter.name}*<#if parameter.required == "true">*</#if>
|${parameter.description}
|${parameter.in}
a|__${parameter.schemaModel.type}__
<#if parameter.schemaModel.format??>
__(${parameter.schemaModel.format})__
</#if>
<#if parameter.schemaModel.itemsObjectRef??>
<<<${parameter.schemaModel.itemsObjectRef}>>>
</#if>
<#if parameter.schemaModel.minLength??>*Min. length*: ${parameter.schemaModel.minLength}</#if>

<#if parameter.schemaModel.maxLength??>*Max. length*: ${parameter.schemaModel.maxLength}</#if>

<#if parameter.schemaModel.pattern??>*Pattern*: `${parameter.schemaModel.pattern}`</#if>

<#if parameter.schemaModel.enumValues?has_content>
*Values*:
<#list parameter.schemaModel.enumValues as enumValue>

* ${enumValue}
</#list>
</#if>
</#list>
|===
</#if>
<#if method.apiResponses?has_content>

*Api responses*
[width=100%]
|===
|Code|Description|Content type|Schema|Example
<#list method.apiResponses as apiResponse>
|${apiResponse.responseCode}
|${apiResponse.description}
|<#if apiResponse.contentType??>*${apiResponse.contentType}*<#else>-</#if>
|<#if apiResponse.objectTypeRef??><<${apiResponse.objectTypeRef}>><#else>-</#if>
a|
<#if apiResponse.example??>
[source,json]
----
${apiResponse.example}
----
<#else>
-
</#if>
</#list>
|===

</#if>
</#list>

<#if openApi.components?has_content>
== Components
<#list openApi.components as component>
=== ${component.name}
<#if component.fields?has_content>
:table-caption: Table
<#if component.description??>.${component.description}<#else>.Component ${component.name}</#if>
[width=100%]
|===
|Name|Description|Schema
<#list component.fields as field>
|*${field.fieldName}*<#if field.required == "true">*</#if>
|<#if field.description??>${field.description}<#else>-</#if>
a|<#if field.schemaModel.type??>
__${field.schemaModel.type}__
<#if field.schemaModel.format??>
__(${field.schemaModel.format})__
</#if>
<#if field.schemaModel.itemsObjectRef??>
<<<${field.schemaModel.itemsObjectRef}>>>
</#if>
</#if>
<#if field.schemaModel.objectTypeRef??>
<<${field.schemaModel.objectTypeRef}>>
</#if>

<#if field.schemaModel.minLength??>*Min. length*: ${field.schemaModel.minLength}</#if>

<#if field.schemaModel.maxLength??>*Max. length*: ${field.schemaModel.maxLength}</#if>

<#if field.schemaModel.pattern??>*Pattern*: `${field.schemaModel.pattern}`</#if>

<#if field.schemaModel.enumValues?has_content>
*Values*:
<#list field.schemaModel.enumValues as enumValue>

* ${enumValue}
</#list>
</#if>
</#list>
|===
</#if>
</#list>
</#if>

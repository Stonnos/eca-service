<#if openApi.title??>
= ${openApi.title}
</#if>
<#if openApi.author??>
Автор: ${openApi.author}
</#if>
<#if openApi.email??>
(${openApi.email})
</#if>
:toc:
:toc-title: Table of contents

<#if openApi.description??>
== Overview

${openApi.description}
</#if>

<#if openApi.securitySchemes?has_content>
== Security schemas

<#list openApi.securitySchemes as securityScheme>

=== ${(securityScheme.name)!"Unknown schema"} <#if securityScheme.description??>- ${securityScheme.description}</#if>

[width=100%]
|===
|Type|Description|Flows
|*${(securityScheme.type)!"-"}*
|
<#if securityScheme.in??>
*Client credentials location:* __${securityScheme.in}__
</#if>

<#if securityScheme.bearerFormat??>
*Bearer format:* __${securityScheme.bearerFormat}__
</#if>
a|<#if securityScheme.oauth2Flows?has_content>
<#list securityScheme.oauth2Flows as flow>

*Flow*

__Grant type:__ ${(flow.grantType)!"-"}

<#if flow.tokenUrl??>
__Token url:__ ${flow.tokenUrl}
</#if>

<#if flow.tokenUrl??>
__Refresh token url:__ ${flow.refreshUrl}
</#if>

<#if flow.authorizationUrl??>
__Authorization url:__ ${flow.authorizationUrl}
</#if>

<#if flow.scopes?has_content>
__Scopes__:

<#list flow.scopes as scope>

* <#if scope??>${scope}</#if>
</#list>
</#if>

</#list>
</#if>
|===
</#list>
</#if>

<#list openApi.methods as method>
== ${(method.description)!"API method"}

__${method.requestType}__ *${method.endpoint}* <#if method.summary??>- ${method.summary}</#if>

<#if method.security?has_content>
*Security requirement*

[cols="^50%,^50%",options="header"]
|===
|Name|Scopes
<#list method.security as security>
|*${(security.name)!"-"}*
a|<#if security.scopes?has_content>
<#list security.scopes as scope>

* <#if scope??>${scope}</#if>
</#list>
</#if>
</#list>
|===
</#if>

<#if method.requestBody??>
*Request body*

[width=100%]
|===
|Content type|Required|Schema|Example
|*${(method.requestBody.contentType)!"-"}*
|${(method.requestBody.required)!"-"}
|<#if method.requestBody.bodyRef??><<${method.requestBody.bodyRef}>><#else>-</#if>
a|
<#if method.requestBody.example??>
[source,json]
----
${method.requestBody.example}
----
<#else>
-
</#if>
|===

<#if method.requestBody.schemaProperties?has_content>
*Multipart form data fields*

[width=100%]
|===
|Name|Description|Schema
<#list method.requestBody.schemaProperties as field>
|*${(field.fieldName)!"-"}*<#if field.required>*</#if>
|${(field.description)!"-"}
a|<#if field.schema.type??>
__${field.schema.type}__
<#if field.schema.format??>
__(${field.schema.format})__
</#if>
<#if field.schema.itemsObjectRef??>
<<<${field.schema.itemsObjectRef}>>>
</#if>
</#if>
<#if field.schema.objectTypeRef??>
<<${field.schema.objectTypeRef}>>
</#if>

<#if field.schema.minLength??>*Min. length*: ${field.schema.minLength}</#if>

<#if field.schema.maxLength??>*Max. length*: ${field.schema.maxLength}</#if>

<#if field.schema.pattern??>*Pattern*: `${field.schema.pattern}`</#if>

<#if field.schema.enumValues?has_content>
*Values*:
<#list field.schema.enumValues as enumValue>

* <#if enumValue??>${enumValue}</#if>
</#list>
</#if>
</#list>
</#if>
</#if>

<#if method.requestParameters?has_content>
*Request parameters*
[width=100%]
|===
|Name|Description|Type|Schema
<#list method.requestParameters as parameter>
|*${(parameter.name)!"-"}*<#if parameter.required>*</#if>
|${(parameter.description)!"-"}
|${(parameter.in)!"-"}
a|__${(parameter.schema.type)!"unknown type"}__
<#if parameter.schema.format??>
__(${parameter.schema.format})__
</#if>
<#if parameter.schema.itemsObjectRef??>
<<<${parameter.schema.itemsObjectRef}>>>
</#if>

<#if parameter.schema.minLength??>*Min. length*: ${parameter.schema.minLength}</#if>

<#if parameter.schema.maxLength??>*Max. length*: ${parameter.schema.maxLength}</#if>

<#if parameter.schema.pattern??>*Pattern*: `${parameter.schema.pattern}`</#if>

<#if parameter.schema.enumValues?has_content>
*Values*:
<#list parameter.schema.enumValues as enumValue>

* <#if enumValue??>${enumValue}</#if>
</#list>
</#if>
</#list>
|===
</#if>
<#if method.apiResponses?has_content>

*Api responses*
[width=100%]
|===
|Code|Description|Content type|Schema|Example
<#list method.apiResponses as apiResponse>
|${(apiResponse.responseCode)!"-"}
|${(apiResponse.description)!"-"}
|*${(apiResponse.contentType)!"-"}*
|<#if apiResponse.objectTypeRef??><<${apiResponse.objectTypeRef}>><#else>-</#if>
a|
<#if apiResponse.example??>
[source,json]
----
${apiResponse.example}
----
<#else>
-
</#if>
</#list>
|===

</#if>
</#list>

<#if openApi.components?has_content>
== Components
<#list openApi.components as component>
=== ${(component.name)!"Component"}
<#if component.fields?has_content>
:table-caption: Table
<#if component.description??>.${component.description}<#else>.Component ${(component.name)!""}</#if>
[width=100%]
|===
|Name|Description|Schema
<#list component.fields as field>
|*${(field.fieldName)!"-"}*<#if field.required>*</#if>
|${(field.description)!"-"}
a|<#if field.schema.type??>
__${field.schema.type}__
<#if field.schema.format??>
__(${field.schema.format})__
</#if>
<#if field.schema.itemsObjectRef??>
<<<${field.schema.itemsObjectRef}>>>
</#if>
</#if>
<#if field.schema.objectTypeRef??>
<<${field.schema.objectTypeRef}>>
</#if>

<#if field.schema.minLength??>*Min. length*: ${field.schema.minLength}</#if>

<#if field.schema.maxLength??>*Max. length*: ${field.schema.maxLength}</#if>

<#if field.schema.pattern??>*Pattern*: `${field.schema.pattern}`</#if>

<#if field.schema.enumValues?has_content>
*Values*:
<#list field.schema.enumValues as enumValue>

* <#if enumValue??>${enumValue}</#if>
</#list>
</#if>
</#list>
|===
</#if>
</#list>
</#if>

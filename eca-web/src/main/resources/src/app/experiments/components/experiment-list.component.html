<div class="container-fluid mb-5">
  <div class="row">
    <div class="col-2">
      <app-filter [filters]="filters" (search)="onSearch()"></app-filter>
    </div>
    <div class="col-10">
      <p-table
        class="experiment-table"
        [columns]="columns"
        [value]="items"
        [rows]="pageSize"
        [totalRecords]="total"
        [paginator]="true"
        [scrollable]="true"
        [sortField]="defaultSortField"
        [sortOrder]="defaultSortOrder"
        [lazy]="true"
        (onLazyLoad)="onLazyLoad($event)">

        <ng-template pTemplate="caption">
          <div class="ui-g ui-fluid">
            <div class="ui-g-12 ui-md-2">
              <p-panel class="info-panel text-center" [showHeader]="false">
                <p class="attr">Total experiments</p>
                <p class="value">{{ getExperimentsTotalCount() }}</p>
              </p-panel>
            </div>

            <div class="ui-g-12 ui-md-2">
              <div class="panel info-panel">
                <p-panel class="info-panel text-center" [showHeader]="false">
                  <p class="attr">New experiments</p>
                  <p class="value">{{ getNewExperimentsCount() }}</p>
                </p-panel>
              </div>
            </div>

            <div class="ui-g-12 ui-md-2">
              <div class="panel info-panel">
                <p-panel class="info-panel text-center" [showHeader]="false">
                  <p class="attr">Successfully completed</p>
                  <p class="value">{{ getFinishedExperimentsCount() }}</p>
                </p-panel>
              </div>
            </div>

            <div class="ui-g-12 ui-md-2">
              <div class="panel info-panel">
                <p-panel class="info-panel text-center" [showHeader]="false">
                  <p class="attr">Completed with error</p>
                  <p class="value">{{ getErrorExperimentsCount() }}</p>
                </p-panel>
              </div>
            </div>

            <div class="ui-g-12 ui-md-2">
              <div class="panel info-panel">
                <p-panel class="info-panel text-center" [showHeader]="false">
                  <p class="attr">Completed with timeout</p>
                  <p class="value">{{ getTimeoutExperimentsCount() }}</p>
                </p-panel>
              </div>
            </div>

          </div>
        </ng-template>

        <ng-template pTemplate="header">
          <tr>
            <th *ngFor="let column of columns" [pSortableColumn]="column.name">
              {{ column.label }}
              <p-sortIcon [field]="column.label"></p-sortIcon>
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
          <tr>
            <td *ngFor="let column of columns">
              <a [routerLink]="" *ngIf="isLink(column.name)" (click)="onLink(column.name, item)">
                {{ item[column.name] }}
              </a>
              <span *ngIf="!isLink(column.name)">{{ item[column.name] }}</span>
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage" *ngIf="items.length == 0">
          <tr>
            <td [attr.colspan]="columns.length" style="text-align: center;">
              No experiments found
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>

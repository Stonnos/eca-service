<p-table
  class="experiment-results-table"
  [columns]="experimentResultsColumns"
  [value]="experimentErsReport?.experimentResults || []">

  <!--<ng-template pTemplate="caption">
    <span class="text-bold">{{ caption }}</span>
  </ng-template>-->

  <ng-template pTemplate="header">
    <tr>
      <ng-container *ngFor="let column of experimentResultsColumns">
        <th>{{ column.label }}</th>
      </ng-container>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-item>
    <tr>
      <td *ngFor="let column of experimentResultsColumns">
        <a class="link" [routerLink]="" *ngIf="isLink(column.name)"
           (click)="onSelect($event, item, column.name, classifierInputOptionsPanel)">
          {{ getColumnValue(column.name, item) }}
        </a>
        <div *ngIf="!isLink(column.name)">
          <ng-container [ngSwitch]="column.name">
            <ng-container *ngSwitchCase="'sent'">
              <span [class.text-success]="item.sent"
                    [class.text-danger]="!item.sent">
                {{ getColumnValue(column.name, item) }}
              </span>
            </ng-container>
            <ng-container *ngSwitchDefault>
              <span>{{ getColumnValue(column.name, item) }}</span>
            </ng-container>
          </ng-container>
        </div>
      </td>
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage" *ngIf="experimentErsReport?.experimentResults?.length == 0">
    <tr>
      <td [attr.colspan]="experimentResultsColumns.length" class="text-center">
        Результатов не найдено
      </td>
    </tr>
  </ng-template>
  <ng-template pTemplate="summary">
    Отправлено результатов {{ experimentErsReport?.sentClassifiersCount || 0 }} из {{ experimentErsReport?.classifiersCount || 0 }}
  </ng-template>
</p-table>

<p-overlayPanel #classifierInputOptionsPanel [showCloseIcon]="true">
  <p-panel *ngIf="selectedExperimentResults" class="info-panel">
    <ng-container *ngFor="let option of selectedExperimentResults.classifierInfo.inputOptions">
      <div class="ui-g">
        <div class="ui-g-6 text-right text-bold text-wrap">
          {{ option.optionName }}
        </div>
        <div class="ui-g-6 text-left text-wrap">
          {{ option.optionValue }}
        </div>
      </div>
    </ng-container>
  </p-panel>
</p-overlayPanel>

<div class="ui-g">
  <div class="ui-g-12 text-center text-wrap">
    <div [class.text-success]="experimentErsReport?.ersReportStatus.value == 'SUCCESS_SENT'"
         [class.text-info]="experimentErsReport?.ersReportStatus.value == 'EXPERIMENT_IN_PROGRESS' || experimentErsReport?.ersReportStatus.value == 'NEED_SENT'"
         [class.text-danger]="experimentErsReport?.ersReportStatus.value == 'EXPERIMENT_ERROR' || experimentErsReport?.ersReportStatus.value == 'EXPERIMENT_DELETED'">
      {{ experimentErsReport?.ersReportStatus.description }}
    </div>
  </div>
</div>

<div class="ui-g">
  <div class="ui-g-12">
    <button
      pButton
      label="Отправить"
      type="button"
      [disabled]="!needSentToErs()"
      (click)="sentEvaluationResults()"
      class="m-auto">
    </button>
  </div>
</div>
<!--<p-dialog
  [(visible)]="visible"
  header="Статистика запросов в ERS"
  width="700"
  appendTo="body"
  [modal]="true"
  [blockScroll]="false"
  [draggable]="false"
  [resizable]="false"
  (onHide)="hide()">

  <div class="ui-g">
    <div class="ui-g-6 text-right text-bold text-wrap">
      UUID эксперимента:
    </div>
    <div class="ui-g-6 text-left text-wrap text-bold">
      {{ experimentErsReport?.experimentUuid }}
    </div>
  </div>

  <div class="ui-g">
    <div class="ui-g-6 text-right text-bold text-wrap">
      Число запросов в ERS на сохранение классификаторов:
    </div>
    <div class="ui-g-6 text-left text-wrap">

    </div>
  </div>

  <div class="ui-g">
    <div class="ui-g-6 text-right text-bold text-wrap">
      Число успешно сохраненных классификаторов:
    </div>
    <div class="ui-g-6 text-left text-wrap">

    </div>
  </div>

  <div class="ui-g">
    <div class="ui-g-6 text-right text-bold text-wrap">
      Число неудачных запросов:
    </div>
    <div class="ui-g-6 text-left text-wrap">

    </div>
  </div>

  <div class="ui-g">
    <div class="ui-g-12 text-center text-wrap">
      <div [class.text-success]="experimentErsReport?.ersReportStatus.value == 'SUCCESS_SENT'"
           [class.text-info]="experimentErsReport?.ersReportStatus.value == 'EXPERIMENT_IN_PROGRESS' || experimentErsReport?.ersReportStatus.value == 'NEED_SENT'"
           [class.text-danger]="experimentErsReport?.ersReportStatus.value == 'EXPERIMENT_ERROR' || experimentErsReport?.ersReportStatus.value == 'EXPERIMENT_DELETED'">
        {{ experimentErsReport?.ersReportStatus.description }}
      </div>
    </div>
  </div>

  <p-footer>
    <button
      pButton
      label="Отправить запрос"
      type="button"
      [disabled]="!canSent()"
      (click)="sentEvaluationResults()"
      class="ml-auto">
    </button>
  </p-footer>
</p-dialog>-->

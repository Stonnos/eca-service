[
  {
    "name": "Выполнение задачи",
    "id": "TaskExecution",
    "isDefault": false,
    "appliesTo": [
      "bpmn:ServiceTask"
    ],
    "properties": [
      {
        "type": "Hidden",
        "value": "com.ecaservice.server.bpm.listeners.TaskExecutionListener",
        "binding": {
          "type": "property",
          "name": "camunda:class"
        }
      },
      {
        "label": "Тип задачи",
        "type": "Dropdown",
        "value": "GET_EXPERIMENT_DETAILS",
        "choices": [
          {
            "name": "Получение данных о заявке на эксперимент",
            "value": "GET_EXPERIMENT_DETAILS"
          },
          {
            "name": "Перевести заявку на эксперимент в работу",
            "value": "START_EXPERIMENT"
          },
          {
            "name": "Завершить работу с заявкой на эксперимент",
            "value": "FINISH_EXPERIMENT"
          },
          {
            "name": "Начать или продолжить построение эксперимента",
            "value": "PROCESS_EXPERIMENT"
          },
          {
            "name": "Получить статус постояния эксперимента",
            "value": "GET_EXPERIMENT_PROCESS_STATUS"
          },
          {
            "name": "Отправить email для заявки на эксперимент",
            "value": "SENT_EXPERIMENT_EMAIL"
          },
          {
            "name": "Отправить системное пуш уведомление для заявки на эксперимент",
            "value": "SENT_EXPERIMENT_SYSTEM_PUSH"
          },
          {
            "name": "Отправить пуш уведомление пользователю для заявки на эксперимент",
            "value": "SENT_EXPERIMENT_WEB_PUSH"
          },
          {
            "name": "Отправить ответное сообщение в очередь для заявки на эксперимент",
            "value": "SENT_EXPERIMENT_RESPONSE"
          },
          {
            "name": "Получить данные о пользователе",
            "value": "GET_USER_INFO"
          },
          {
            "name": "Сформировать обучающую выборку на основе данных из data-storage",
            "value": "EXPORT_VALID_INSTANCES"
          },
          {
            "name": "Создать заявку на эксперимент",
            "value": "CREATE_EXPERIMENT_REQUEST"
          },
          {
            "name": "Создать заявку на эксперимент через web",
            "value": "CREATE_EXPERIMENT_WEB_REQUEST"
          }
        ],
        "binding": {
          "type": "camunda:inputParameter",
          "name": "taskType"
        }
      }
    ],
    "entriesVisible": {
      "_all": true,
      "candidateUsers": false,
      "candidateGroups": false,
      "property": true,
      "class": false,
      "implementation": false,
      "delegate": false,
      "asyncBefore": false,
      "asyncAfter": true
    }
  },
  {
    "name": "Задача для работы с ошибками",
    "id": "ErrorHandler",
    "isDefault": false,
    "appliesTo": [
      "bpmn:ServiceTask"
    ],
    "properties": [
      {
        "type": "Hidden",
        "value": "com.ecaservice.server.bpm.listeners.BpmErrorHandler",
        "binding": {
          "type": "property",
          "name": "camunda:class"
        }
      },
      {
        "label": "Код ошибки",
        "type": "Dropdown",
        "value": "UNKNOWN_ERROR",
        "choices": [
          {
            "name": "Передана заявка с недопустимым статусом",
            "value": "INVALID_EXPERIMENT_REQUEST_STATUS"
          },
          {
            "name": "Неизвестная ошибка",
            "value": "UNKNOWN_ERROR"
          }
        ],
        "binding": {
          "type": "camunda:inputParameter",
          "name": "taskType"
        }
      },
      {
        "label": "Описание ошибки",
        "type": "String",
        "binding": {
          "type": "camunda:inputParameter",
          "name": "errorMessage"
        }
      }
    ],
    "entriesVisible": {
      "_all": true,
      "candidateUsers": false,
      "candidateGroups": false,
      "property": true,
      "class": false,
      "implementation": false,
      "delegate": false,
      "asyncBefore": false,
      "asyncAfter": false
    }
  },
  {
    "name": "Отправка email для заявки на эксперимент",
    "id": "ExperimentEmailSender",
    "isDefault": false,
    "appliesTo": [
      "bpmn:ServiceTask"
    ],
    "properties": [
      {
        "type": "Hidden",
        "value": "com.ecaservice.server.bpm.listeners.TaskExecutionListener",
        "binding": {
          "type": "property",
          "name": "camunda:class"
        }
      },
      {
        "type": "Hidden",
        "value": "SENT_EXPERIMENT_EMAIL",
        "binding": {
          "type": "camunda:inputParameter",
          "name": "taskType"
        }
      },
      {
        "label": "Код шаблона сообщения",
        "type": "Dropdown",
        "value": "NEW_EXPERIMENT",
        "choices": [
          {
            "name": "Сообщение о новой заявке на эксперимент",
            "value": "NEW_EXPERIMENT"
          },
          {
            "name": "Сообщение о поступлении заявки на эксперимент в работу",
            "value": "IN_PROGRESS_EXPERIMENT"
          },
          {
            "name": "Сообщение о завершении эксперимента",
            "value": "FINISHED_EXPERIMENT"
          },
          {
            "name": "Сообщение об ошибке при построении эксперимента",
            "value": "ERROR_EXPERIMENT"
          },
          {
            "name": "Сообщение о таймауте при построении эксперимента",
            "value": "TIMEOUT_EXPERIMENT"
          }
        ],
        "binding": {
          "type": "camunda:inputParameter",
          "name": "emailTemplateCode"
        }
      },
      {
        "label": "Переменные шаблона сообщения",
        "type": "String",
        "binding": {
          "type": "camunda:inputParameter",
          "name": "emailTemplateVariables"
        }
      }
    ],
    "entriesVisible": {
      "_all": true,
      "candidateUsers": false,
      "candidateGroups": false,
      "property": true,
      "class": false,
      "implementation": false,
      "delegate": false,
      "asyncBefore": false,
      "asyncAfter": true
    }
  }
]
